<html>
<head>
<link href="../SmallTownSteam/css/bootstrap.css" rel="stylesheet">
<meta name="author" content="Rayan Islam and Bootstrap contributors">
<title>Upcoming Classes</title>
<style>
  table {
    border-collapse: collapse;
    width: 100%;
  }

  th, td {
    text-align: left;
    padding: 8px;
    vertical-align: center;
  }
  
  tr:nth-child(even) {
    background-color: #D6EEEE;
  }
</style>


</head>
<body>
  <?php
  # Read the contents of all upcoming courses to be displayed in each track
  $filename = "classes_and_registration/upcoming-classes.txt";
  $all_courses = file($filename);
  ?>
  <div class="container py-4">
        <header class="pb-3 mb-4 border-bottom">
        <div id="header">
        </div>

        <div class="accordion" id="classesDropdown">
                <div class="accordion-item">
                  <h2 class="accordion-header" id="headingOne">
                    <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapseOne" aria-expanded="true" aria-controls="collapseOne">
                      Upcoming Science Classes
                    </button>
                  </h2>
                  <div id="collapseOne" class="accordion-collapse collapse show" aria-labelledby="headingOne" data-bs-parent="#classesDropdown">
                    <div class="accordion-body">
                      <table> 
                        <tr><th>Class Title</th><th>Date Offered</th><th>Registration Link</th></tr>
                        
                      <?php 
                          #This code breaks out the all_courses into individual courses, 
                          #then removes the custom delimiter (===), breaking every course line into 
                          #track at index 0, d/m/y as index 1, 2, 3 and title as index 4
                          #Finally diplayes the course in a table if the index 0 of single_course matches desired  matches 
                          #the Register link will open a new page with prepoulate course info, but will require for user to provide their info
                          foreach ($all_courses as $single_course)
                          { 
                              $single_course = explode("===", $single_course);
                              if ($single_course[0] == 'Science')
                                {
                                  echo "<tr>";
                                  echo "<td> {$single_course[4]}</td>";
                                  echo "<td> {$single_course[1]} {$single_course[2]}, {$single_course[3]}</td>";
                                  ?>
                                  <td> <form action="register.php" method="post">
                                            <input type="hidden" name="track" value='<?php echo "$single_course[0]";?>'>
                                            <input type="hidden" name="date" value='<?php echo "$single_course[1]-$single_course[2]-$single_course[3]";?>'>
                                            <input type="hidden" name="course" value='<?php echo "$single_course[4]";?>'>
                                            <input type="submit" value="Register">
                                            </form>
                                        </td> <?php
                                  echo "</tr>";
                                  
                                }
                          }
                          echo "</table>"; 
                      ?>
                    </div>
                  </div>
                </div>
                <div class="accordion-item">
                  <h2 class="accordion-header" id="headingTwo">
                    <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseTwo" aria-expanded="false" aria-controls="collapseTwo">
                        Upcoming Technology Classes
                    </button>
                  </h2>
                  <div id="collapseTwo" class="accordion-collapse collapse" aria-labelledby="headingTwo" data-bs-parent="#classesDropdown">
                    <div class="accordion-body">
                      <table style="width:60%"> 
                        <table> 
                          <tr><th>Class Title</th><th>Date Offered</th><th>Registration Link</th></tr>
                          <?php
                          foreach ($all_courses as $data)
                          { 
                              $data = explode("===", $data);
                              if ($data[0] == 'Technology')
                                {
                                  echo "<tr>";
                                  echo "<td> {$data[4]}</td><td>{$data[1]} {$data[2]}, {$data[3]}</td><td>Register Now</td>";
                                  echo "</tr>";
                                  echo "<tr> </tr>";
                                }
                          }
                          echo "</table>"; 
                      ?>
                    </div>
                  </div>
                </div>
                <div class="accordion-item">
                  <h2 class="accordion-header" id="headingThree">
                    <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseThree" aria-expanded="false" aria-controls="collapseThree">
                        Upcoming Engineering Classes
                    </button>
                  </h2>
                  <div id="collapseThree" class="accordion-collapse collapse" aria-labelledby="headingThree" data-bs-parent="#classesDropdown">
                    <div class="accordion-body">
                      <ul>
                        <li><a href="">May 10th</a></li>
                        <li><a href="">June 7th </a></li>
                        <li><a href="">March 8th</a></li>
                      </ul>
                    </div>
                  </div>
                </div>
                <div class="accordion-item">
                 <h2 class="accordion-header" id="headingFour">
                   <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseFour" aria-expanded="false" aria-controls="collapseFour">
                        Upcoming Art Classes
                          </button>
                        </h2>
                        <div id="collapseFour" class="accordion-collapse collapse" aria-labelledby="headingFour" data-bs-parent="#classesDropdown">
                          <div class="accordion-body">
                            <ul>
                              <li><a href="">May 11th</a></li>
                              <li><a href="">June 8th </a></li>
                              <li><a href="">March 9th</a></li>
                            </ul>
                          </div>
                        </div>
                      </div>
                  <div class="accordion-item">
                 <h2 class="accordion-header" id="headingFive">
                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseFive" aria-expanded="false" aria-controls="collapseFive">
                  Upcoming Math Classes
                          </button>
                        </h2>
                        <div id="collapseFive" class="accordion-collapse collapse" aria-labelledby="headingFive" data-bs-parent="#classesDropdown">
                          <div class="accordion-body">
                            <ul>
                              <li><a href="">May 12th</a></li>
                              <li><a href="">June 9th </a></li>
                              <li><a href="">March 10th</a></li>
                            </ul>
                          </div>
                        </div>
                      </div>
                
              </div>
<div id="footer">
</div>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
        <script src="js/scripts.js"></script>
	<script src="//code.jquery.com/jquery.min.js"></script>
	<script>$(function(){
  		$("#header").load("navBar.html");
                $("#footer").load("footer.html");
		}); 
	</script>
